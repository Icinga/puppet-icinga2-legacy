<%= scope.function_template(['icinga2/_header.erb']) -%>
<%-
  default_includes = scope.lookupvar('::icinga2::includes_default')
-%>

/**
 * The constants.conf defines global constants.
 */
include "constants.conf"

/**
 * The Icinga Template Library (ITL) provides a number of useful templates
 * and command definitions.
 * Common monitoring plugin command definitions are included separately.
 */
<% if default_includes -%>
include <itl>
include <plugins>
include <plugins-contrib>
<% end -%>
<% scope.lookupvar('::icinga2::includes_itl').each do |file| -%>
include <%= file.to_s.dump.gsub(/^"(.+)"$/, '<\1>') %>
<% end -%>

/**
 * The features-available directory contains a number of configuration
 * files for features which can be enabled and disabled using the
 * icinga2-enable-feature / icinga2-disable-feature tools. These two tools work by creating
 * and removing symbolic links in the features-enabled directory.
 */
include "features-enabled/*.conf"

/* included files */
<% scope.lookupvar('::icinga2::includes').each do |file| -%>
include <%= file.to_s.dump %>
<% end -%>

/* recursive includes */
<% if default_includes -%>
include_recursive "conf.d"
include_recursive "objects"
<% end -%>
<% scope.lookupvar('::icinga2::includes_recursive').each do |file| -%>
include_recursive <%= file.to_s.dump %>
<% end -%>
