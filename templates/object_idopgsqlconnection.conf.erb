/**
 * WARNING: This IdoPgsqlConnection definition is automatically generated by Puppet.
 * ANY MANUAL CHANGES TO IT WILL GET OVERWRITTEN!
 */

/**
 * An IdoPgsqlConnection definition. You can create your own configuration
 * files in the conf.d directory (e.g. one per host). By default all *.conf
 * files in this directory are included.
 *
 *
 * See http://docs.icinga.org/icinga2/latest/doc/module/icinga2/chapter/configuring-icinga2#objecttype-idopgsqlconnection
 * for more info on Postgres IDO connection obects.
 */

library "db_ido_pgsql"

object IdoPgsqlConnection "pgsql-ido" {
  <%#- If any of the @ parameters are undefined, don't print anything for them: -%>
  <%- if @host -%>
  <%#- Otherwise, include the parameter: -%>
  host = "<%= @host -%>"
  <%- end -%>
  <%- if @port -%>
  port = <%= @port %>
  <%- end -%>
  <%- if @user -%>
  user = "<%= @user -%>"
  <%- end -%>
  <%- if @password -%>
  password = "<%= @password -%>"
  <%- end -%>
  <%- if @database -%>
  database = "<%= @database -%>"
  <%- end -%>
  <%- if @table_prefix -%>
  table_prefix = "<%= @table_prefix -%>"
  <%- end -%>
  <%- if @instance_name -%>
  instance_name = "<%= @instance_name -%>"
  <%- end -%>
  <%- if @instance_description -%>
  instance_description = "<%= @instance_description -%>"
  <%- end -%>

  <%- if @cleanup.empty? != true -%>
  cleanup = {
    <%- @cleanup.sort_by {|key, value| key}.each do |key, value| -%>
    <%= key %> = <%= value %>
    <%- end -%>
  }
  <%- end -%>

  <%- if @categories.length != 0 -%>
  categories = <%= @categories.map {|category| "#{category}"}.join(' | ') %>
  <%- end -%>
}
