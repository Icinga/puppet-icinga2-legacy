/**
* WARNING: This CheckCommand definition is automatically generated by Puppet.
* ANY MANUAL CHANGES TO IT WILL GET OVERWRITTEN!
*/

/**
* A CheckCommand definition. You can create your own configuration files
* in the conf.d directory (e.g. one per commnand). By default all *.conf
* files in this directory are included.
*
*/

object CheckCommand "<%= @object_checkcommandname %>" {
  <%- @templates.each do |t| -%>
  import "<%= t -%>"
  <%- end -%>
  <%- if @command -%>
  <%- a_command = [@command].flatten.compact -%>
  command = [ <% if @sudo %>"<%= @sudo_cmd %>", <% end %><% a_command.each_with_index do |cmd, i| %><% if @cmd_path and i == 0 -%><%= @cmd_path -%> + <% end -%>"<%= cmd -%>"<%= ', ' if i < (a_command.size - 1) %><% end %> ]
  <%- end -%>
  <%- if @arguments.any? -%>

  arguments = <%= scope.function_icinga2_config_value([@arguments]) %>
  <%- end -%>

  <%- if @vars.any? -%>
  <%- @vars.each do |key, val| -%>
  vars.<%= key -%> = <%= val %>
  <%- end -%>
  <%- end -%>

  <%- if @timeout -%>
  timeout = <%= @timeout %>
  <%- end -%>

  <%- if @env.any? -%>
  env += <%= scope.function_icinga2_config_value([@env]) %>
  <%- end -%>
}
