/**
 * WARNING: This service definition is automatically generated by Puppet.
 * ANY MANUAL CHANGES TO IT WILL GET OVERWRITTEN!
 */

/**
 * A object definition that applys notifications to hosts. You can create your
 * own configuration files in the conf.d directory (e.g. one per host).
 * By default all *.conf files in this directory are included.
 *
 */

apply Notification "<%= @object_notificationname %>" to Host {
  <%- @templates.each do |t| -%>
  import "<%= t -%>"
  <%- end -%>
  <%- if @assign_where -%>
  assign where <%= @assign_where %>
  <%- end -%>
  <%- if @ignore_where -%>
  ignore where <%= @ignore_where %>
  <%- end -%>
  <%- if @command -%>
  command = "<%= @command %>"
  <%- end -%>
  <%- if @vars.any? -%>
  vars += <%= scope.function_icinga2_config_value([@vars]) %>
  <%- end -%>
  <%- if @users.empty? !=true -%>
  <%- if @users.is_a?(Array) -%>
  users = [ <% @users.each_with_index do |usr, i| %>"<%= usr -%>"<%= ', ' if i < (@users.size - 1) %><% end %> ]
  <%- end -%>
  <%- if @users.is_a?(String) -%>
  users = <%= @users %>
  <%- end -%>
  <%- end -%>
  <%- if @user_groups.empty? !=true -%>
  <%- if @user_groups.is_a?(Array) -%>
  user_groups = [ <% @user_groups.each_with_index do |u_grp, i| %>"<%= u_grp -%>"<%= ', ' if i < (@user_groups.size - 1) %><% end %> ]
  <%- end -%>
  <%- if @users.is_a?(String) -%>
  user_groups = <%= @user_groups %>
  <%- end -%>
  <%- end -%>
  <%- if @times.empty? != true -%>
  times = {
  <%- @times.sort_by {|key, value| key}.each do |key, value| -%>
    <%= key %> = "<%= value %>"
  <%- end -%>
  }
  <%- end -%>
  <%- if @interval -%>
  interval = <%= @interval %>
  <%- end -%>
  <%- if @period -%>
  period = "<%= @period -%>"
  <%- end -%>
  <%- if @types.empty? !=true -%>
  types = [ <% @types.each_with_index do |typ, i| %><%= typ -%><%= ', ' if i < (@types.size - 1) %><% end %> ]
  <%- end -%>
  <%- if @states.empty? !=true -%>
  states = [ <% @states.each_with_index do |state, i| %><%= state -%><%= ', ' if i < (@states.size - 1) %><% end %> ]
  <%- end -%>
}
