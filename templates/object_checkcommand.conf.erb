/**
* WARNING: This CheckCommand definition is automatically generated by Puppet.
* ANY MANUAL CHANGES TO IT WILL GET OVERWRITTEN!
*/

/**
* A CheckCommand definition. You can create your own configuration files
* in the conf.d directory (e.g. one per commnand). By default all *.conf
* files in this directory are included.
*
*/

object CheckCommand "<%= @object_checkcommandname %>" {
  <%#- If any of the @ parameters are undefined, don't print anything for them: -%>

  <%- if @template_to_import -%>
  import "<%= @template_to_import -%>"

  <%- end -%>
  <%- if @command -%>
  command = [ <% if @cmd_path -%><%= @cmd_path -%> + <% end -%><% @command.each_with_index do |cmd, i| %><%= cmd -%><%= ', ' if i < (@command.size - 1) %><% end %> ]
  <%- end -%>
  <%#- Need to add support to argument value as hash (recursivity) -%>

  <%- if @arguments -%>
  arguments = {
  <%- @arguments.each_with_index do |(key,value), i| -%>
    <%= key %> = <% if value.class == String %><%= value %>
    <%- else -%>{
      <%- value.sort_by {|k, v| k}.each do |k, v| -%>
      <%= k %> = <%= v %>
      <%- end -%>
    }
    <%- end -%>
  <%- end -%>
  }
  <%- end -%>

  <%- if @vars -%>
  <%- @vars.sort_by {|key, value| key}.each do |key, value| -%>
  <%= key %> = <% if value.class == String %><%= value %>
  <%- else -%>{
    <%- value.sort_by {|k, v| k}.each do |k, v| -%>
    <%= k %> = <%= v %>
    <%- end -%>
  }
    <%- end -%>
  <%- end -%>
  <%- end -%>

  <%- if @timeout -%>
  timeout = <%= @timeout %>
  <%- end -%>

  <%- if @env -%>
  env = {
  <%- @vars.sort_by {|key, value| key}.each do |key, value| -%>
    <%= key %> = <%= value %>
  <%- end -%>
  }
  <%- end -%>
}
